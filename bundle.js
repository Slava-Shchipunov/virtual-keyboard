(()=>{"use strict";const e=[{code:"Backquote",key:"`"},{code:"Digit1",key:"1"},{code:"Digit2",key:"2"},{code:"Digit3",key:"3"},{code:"Digit4",key:"4"},{code:"Digit5",key:"5"},{code:"Digit6",key:"6"},{code:"Digit7",key:"7"},{code:"Digit8",key:"8"},{code:"Digit9",key:"9"},{code:"Digit0",key:"0"},{code:"Minus",key:"-"},{code:"Equal",key:"="},{code:"Backspace",key:"Backspace"},{code:"Tab",key:"Tab"},{code:"KeyQ",key:"q"},{code:"KeyW",key:"w"},{code:"KeyE",key:"e"},{code:"KeyR",key:"r"},{code:"KeyT",key:"t"},{code:"KeyY",key:"y"},{code:"KeyU",key:"u"},{code:"KeyI",key:"i"},{code:"KeyO",key:"o"},{code:"KeyP",key:"p"},{code:"BracketLeft",key:"["},{code:"BracketRight",key:"]"},{code:"Backslash",key:"\\"},{code:"CapsLock",key:"CapsLock"},{code:"KeyA",key:"a"},{code:"KeyS",key:"s"},{code:"KeyD",key:"d"},{code:"KeyF",key:"f"},{code:"KeyG",key:"g"},{code:"KeyH",key:"h"},{code:"KeyJ",key:"j"},{code:"KeyK",key:"k"},{code:"KeyL",key:"l"},{code:"Semicolon",key:";"},{code:"Quote",key:"'"},{code:"Enter",key:"Enter"},{code:"ShiftLeft",key:"Shift"},{code:"KeyZ",key:"z"},{code:"KeyX",key:"x"},{code:"KeyC",key:"c"},{code:"KeyV",key:"v"},{code:"KeyB",key:"b"},{code:"KeyN",key:"n"},{code:"KeyM",key:"m"},{code:"Comma",key:","},{code:"Period",key:"."},{code:"Slash",key:"/"},{code:"ShiftRight",key:"Shift"},{code:"ArrowUp",key:"△"},{code:"Delete",key:"Del"},{code:"ControlLeft",key:"Ctrl"},{code:"MetaLeft",key:"Win"},{code:"AltLeft",key:"Alt"},{code:"Space",key:" "},{code:"AltRight",key:"Alt"},{code:"ControlRight",key:"Ctrl"},{code:"ArrowLeft",key:"◁"},{code:"ArrowDown",key:"▽"},{code:"ArrowRight",key:"▷"}],t=[{code:"Backquote",key:"ё"},{code:"Digit1",key:"1"},{code:"Digit2",key:"2"},{code:"Digit3",key:"3"},{code:"Digit4",key:"4"},{code:"Digit5",key:"5"},{code:"Digit6",key:"6"},{code:"Digit7",key:"7"},{code:"Digit8",key:"8"},{code:"Digit9",key:"9"},{code:"Digit0",key:"0"},{code:"Minus",key:"-"},{code:"Equal",key:"="},{code:"Backspace",key:"Backspace"},{code:"Tab",key:"Tab"},{code:"KeyQ",key:"й"},{code:"KeyW",key:"ц"},{code:"KeyE",key:"у"},{code:"KeyR",key:"к"},{code:"KeyT",key:"е"},{code:"KeyY",key:"н"},{code:"KeyU",key:"г"},{code:"KeyI",key:"ш"},{code:"KeyO",key:"щ"},{code:"KeyP",key:"з"},{code:"BracketLeft",key:"х"},{code:"BracketRight",key:"ъ"},{code:"Backslash",key:"\\"},{code:"CapsLock",key:"CapsLock"},{code:"KeyA",key:"ф"},{code:"KeyS",key:"ы"},{code:"KeyD",key:"в"},{code:"KeyF",key:"а"},{code:"KeyG",key:"п"},{code:"KeyH",key:"р"},{code:"KeyJ",key:"о"},{code:"KeyK",key:"л"},{code:"KeyL",key:"д"},{code:"Semicolon",key:"ж"},{code:"Quote",key:"э"},{code:"Enter",key:"Enter"},{code:"ShiftLeft",key:"Shift"},{code:"KeyZ",key:"я"},{code:"KeyX",key:"ч"},{code:"KeyC",key:"с"},{code:"KeyV",key:"м"},{code:"KeyB",key:"и"},{code:"KeyN",key:"т"},{code:"KeyM",key:"ь"},{code:"Comma",key:"б"},{code:"Period",key:"ю"},{code:"Slash",key:"."},{code:"ShiftRight",key:"Shift"},{code:"ArrowUp",key:"△"},{code:"Delete",key:"Del"},{code:"ControlLeft",key:"Ctrl"},{code:"MetaLeft",key:"Win"},{code:"AltLeft",key:"Alt"},{code:"Space",key:" "},{code:"AltRight",key:"Alt"},{code:"ControlRight",key:"Ctrl"},{code:"ArrowLeft",key:"◁"},{code:"ArrowDown",key:"▽"},{code:"ArrowRight",key:"▷"}],o=[{code:"Backquote",key:"~"},{code:"Digit1",key:"!"},{code:"Digit2",key:"@"},{code:"Digit3",key:"#"},{code:"Digit4",key:"$"},{code:"Digit5",key:"%"},{code:"Digit6",key:"^"},{code:"Digit7",key:"&"},{code:"Digit8",key:"*"},{code:"Digit9",key:"("},{code:"Digit0",key:")"},{code:"Minus",key:"_"},{code:"Equal",key:"+"},{code:"Backspace",key:"Backspace"},{code:"Tab",key:"Tab"},{code:"KeyQ",key:"Q"},{code:"KeyW",key:"W"},{code:"KeyE",key:"E"},{code:"KeyR",key:"R"},{code:"KeyT",key:"T"},{code:"KeyY",key:"Y"},{code:"KeyU",key:"U"},{code:"KeyI",key:"I"},{code:"KeyO",key:"O"},{code:"KeyP",key:"P"},{code:"BracketLeft",key:"{"},{code:"BracketRight",key:"}"},{code:"Backslash",key:"|"},{code:"CapsLock",key:"CapsLock"},{code:"KeyA",key:"A"},{code:"KeyS",key:"S"},{code:"KeyD",key:"D"},{code:"KeyF",key:"F"},{code:"KeyG",key:"G"},{code:"KeyH",key:"H"},{code:"KeyJ",key:"J"},{code:"KeyK",key:"K"},{code:"KeyL",key:"L"},{code:"Semicolon",key:":"},{code:"Quote",key:'"'},{code:"Enter",key:"Enter"},{code:"ShiftLeft",key:"Shift"},{code:"KeyZ",key:"Z"},{code:"KeyX",key:"X"},{code:"KeyC",key:"C"},{code:"KeyV",key:"V"},{code:"KeyB",key:"B"},{code:"KeyN",key:"N"},{code:"KeyM",key:"M"},{code:"Comma",key:"<"},{code:"Period",key:">"},{code:"Slash",key:"?"},{code:"ShiftRight",key:"Shift"},{code:"ArrowUp",key:"△"},{code:"Delete",key:"Del"},{code:"ControlLeft",key:"Ctrl"},{code:"MetaLeft",key:"Win"},{code:"AltLeft",key:"Alt"},{code:"Space",key:" "},{code:"AltRight",key:"Alt"},{code:"ControlRight",key:"Ctrl"},{code:"ArrowLeft",key:"◁"},{code:"ArrowDown",key:"▽"},{code:"ArrowRight",key:"▷"}],c=[{code:"Backquote",key:"Ё"},{code:"Digit1",key:"!"},{code:"Digit2",key:'"'},{code:"Digit3",key:"№"},{code:"Digit4",key:";"},{code:"Digit5",key:"%"},{code:"Digit6",key:":"},{code:"Digit7",key:"?"},{code:"Digit8",key:"*"},{code:"Digit9",key:"("},{code:"Digit0",key:")"},{code:"Minus",key:"_"},{code:"Equal",key:"+"},{code:"Backspace",key:"Backspace"},{code:"Tab",key:"Tab"},{code:"KeyQ",key:"Й"},{code:"KeyW",key:"Ц"},{code:"KeyE",key:"У"},{code:"KeyR",key:"К"},{code:"KeyT",key:"Е"},{code:"KeyY",key:"Н"},{code:"KeyU",key:"Г"},{code:"KeyI",key:"Ш"},{code:"KeyO",key:"Щ"},{code:"KeyP",key:"З"},{code:"BracketLeft",key:"Х"},{code:"BracketRight",key:"Ъ"},{code:"Backslash",key:"/"},{code:"CapsLock",key:"CapsLock"},{code:"KeyA",key:"Ф"},{code:"KeyS",key:"Ы"},{code:"KeyD",key:"В"},{code:"KeyF",key:"А"},{code:"KeyG",key:"П"},{code:"KeyH",key:"Р"},{code:"KeyJ",key:"О"},{code:"KeyK",key:"Л"},{code:"KeyL",key:"Д"},{code:"Semicolon",key:"Ж"},{code:"Quote",key:"Э"},{code:"Enter",key:"Enter"},{code:"ShiftLeft",key:"Shift"},{code:"KeyZ",key:"Я"},{code:"KeyX",key:"Ч"},{code:"KeyC",key:"С"},{code:"KeyV",key:"М"},{code:"KeyB",key:"И"},{code:"KeyN",key:"Т"},{code:"KeyM",key:"Ь"},{code:"Comma",key:"Б"},{code:"Period",key:"Ю"},{code:"Slash",key:","},{code:"ShiftRight",key:"Shift"},{code:"ArrowUp",key:"△"},{code:"Delete",key:"Del"},{code:"ControlLeft",key:"Ctrl"},{code:"MetaLeft",key:"Win"},{code:"AltLeft",key:"Alt"},{code:"Space",key:" "},{code:"AltRight",key:"Alt"},{code:"ControlRight",key:"Ctrl"},{code:"ArrowLeft",key:"◁"},{code:"ArrowDown",key:"▽"},{code:"ArrowRight",key:"▷"}],d=class{constructor(e){this.name=e,this.button=null}create(){this.button=document.createElement("button"),this.button.textContent=this.name,this.button.classList.add("button")}change(e){this.button.textContent=e}},y=document.querySelector("body");let k=!1,i=!1,n=!1,a="En";const s=[];let r=[];const l=["Backspace","Tab","CapsLock","Enter","ShiftLeft","ShiftRight","Delete","ControlLeft","MetaLeft","AltLeft","AltRight","ControlRight"];function K(){r="En"===a?e:t}function g(){s.forEach(((e,t)=>{e.change(r[t].key)}))}window.addEventListener("beforeunload",(()=>{localStorage.setItem("lang",a)})),window.addEventListener("load",(()=>{localStorage.getItem("lang")&&(a=localStorage.getItem("lang"),K(),g())}));const[,,u]=function(){const e=document.createElement("div");y.append(e),e.classList.add("body__wrapper");const t=document.createElement("h1");e.append(t),t.textContent="RSS Virtual Keyboard",t.classList.add("title");const o=document.createElement("textarea");e.append(o),o.classList.add("textarea"),o.focus();const c=document.createElement("div");e.append(c),c.classList.add("info");const d=document.createElement("span");c.append(d),d.textContent="The keyboard was created in the Windows operating system",d.classList.add("info");const k=document.createElement("span");return c.append(k),k.textContent="To switch the language combination: left ctrl + left alt",k.classList.add("info"),[e,t,o,d,k]}(),h=new class{constructor(e){this.name=e,this.main=null}create(){this.main=document.createElement("div");const e=document.createElement("div");this.main.append(e),this.main.classList.add("keyboard"),e.classList.add("keyboard__wrapper"),K();for(let t=0;t<r.length;t+=1){const o=new d(r[t].key);o.create(),s.push(o),o.button.setAttribute("id",t),o.button.setAttribute("data-key-name",r[t].code),e.append(o.button)}}};function f(e){const t=document.querySelector(`[data-key-name=${e}]`);t&&t.classList.toggle("active-button")}function L(){n?(n=!1,r=r.map((e=>{const t=e;return l.includes(e.code)||(t.key=t.key.toLowerCase()),t})),g()):(n=!0,r=r.map((e=>{const t=e;return l.includes(e.code)||(t.key=t.key.toUpperCase()),t})),g())}h.create(),u.after(h.main),window.addEventListener("click",(()=>{u.focus()})),window.addEventListener("keydown",(d=>{d.preventDefault(),d.repeat||(!d.isTrusted||"ShiftLeft"!==d.code&&"ShiftRight"!==d.code||(i=!0),f(d.code),function(e){const t=u.value.length;if(l.includes(e))"Enter"===e?u.setRangeText("\n",u.selectionStart,u.selectionEnd,"end"):"Tab"===e?u.setRangeText("    ",u.selectionStart,u.selectionEnd,"end"):"Backspace"===e?u.selectionStart===u.selectionEnd&&0!==u.selectionStart?u.setRangeText("",u.selectionStart-1,u.selectionEnd,"end"):u.setRangeText("",u.selectionStart,u.selectionEnd,"end"):"Delete"===e&&(u.selectionStart===u.selectionEnd&&u.selectionEnd!==t?u.setRangeText("",u.selectionStart,u.selectionEnd+1,"end"):u.setRangeText("",u.selectionStart,u.selectionEnd,"end"));else{const t=document.querySelector(`[data-key-name=${e}]`);t&&u.setRangeText(t.textContent,u.selectionStart,u.selectionEnd,"end")}}(d.code),function(d){k||"ShiftLeft"!==d.code&&"ShiftRight"!==d.code?k&&!i&&(r="En"===a?e:t,s[41].button.classList.remove("active-button"),s[52].button.classList.remove("active-button"),k=!1,g()):(r="En"===a?o:c,n&&(L(),n=!0),k=!0,g())}(d),"CapsLock"===d.code&&L(),d.ctrlKey&&"AltLeft"===d.code&&(a="En"===a?"Ru":"En",K(),g()))})),window.addEventListener("keyup",(o=>{("ShiftLeft"!==o.code&&"ShiftRight"!==o.code&&"CapsLock"!==o.code||o.isTrusted&&"CapsLock"!==o.code)&&setTimeout((()=>{f(o.code)}),120),"ShiftLeft"!==o.code&&"ShiftRight"!==o.code||!o.isTrusted||(r="En"===a?e:t,g(),k=!1,i=!1,setTimeout((()=>{const e=s[41].button,t=s[52].button;e.classList.remove("active-button"),t.classList.remove("active-button")}),125))})),h.main.addEventListener("mousedown",(t=>{t.target.classList.contains("button")&&window.dispatchEvent(new KeyboardEvent("keydown",{key:e[t.target.id].key,code:e[t.target.id].code}))})),h.main.addEventListener("mouseup",(t=>{t.target.classList.contains("button")&&window.dispatchEvent(new KeyboardEvent("keyup",{key:e[t.target.id].key,code:e[t.target.id].code}))}))})();